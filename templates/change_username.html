<!-- templates/change_username.html -->
{% extends "base.html" %}

{% block title %}アカウント名変更 - {{ app_info.appName if app_info else '世界史単語帳' }}{% endblock %}

{% block content %}
<div class="auth-section">
    <div class="auth-container">
        <h2>
            <i class="fas fa-user-edit me-2"></i>
            アカウント名変更
        </h2>
        
        <div class="auth-message">
            <p><strong>現在のアカウント名:</strong> {{ current_user.username }}</p>
            {% if current_user.original_username and current_user.original_username != current_user.username %}
            <p><small class="text-muted">最初のアカウント名: {{ current_user.original_username }}</small></p>
            {% endif %}
        </div>
        
        <form method="POST">
            <div class="input-group">
                <label for="room_password">
                    <i class="fas fa-key"></i>
                    入室パスワード
                </label>
                <input type="password" id="room_password" name="room_password" 
                       placeholder="部屋の入室パスワードを入力" required>
            </div>
            
            <div class="input-group">
                <label for="individual_password">
                    <i class="fas fa-lock"></i>
                    個別パスワード
                </label>
                <input type="password" id="individual_password" name="individual_password" 
                       placeholder="あなたの個別パスワードを入力" required>
            </div>
            
            <div class="input-group">
                <label for="new_username">
                    <i class="fas fa-user"></i>
                    新しいアカウント名
                </label>
                <input type="text" id="new_username" name="new_username" 
                       placeholder="新しいアカウント名を入力" 
                       value="{{ current_user.username }}" maxlength="80" required>
            </div>
            
            <div class="button-group">
                <button type="submit" class="primary-button">
                    <i class="fas fa-save me-1"></i>
                    アカウント名を変更
                </button>
                <a href="{{ url_for('index') }}" class="secondary-button">
                    <i class="fas fa-arrow-left me-1"></i>
                    キャンセル
                </a>
            </div>
        </form>
        
        <hr>
        
        <div class="link-group">
            <div class="alert alert-info">
                <h5><i class="fas fa-info-circle"></i> 注意事項</h5>
                <ul>
                    <li>アカウント名は同じ部屋内で重複できません</li>
                    <li>変更には入室パスワードと個別パスワードが必要です</li>
                    <li>管理者は変更履歴を確認できます</li>
                </ul>
            </div>
            
            <p>
                <a href="{{ url_for('password_change_page') }}">
                    <i class="fas fa-key me-1"></i>
                    パスワード変更
                </a>
                |
                <a href="{{ url_for('index') }}">
                    <i class="fas fa-home me-1"></i>
                    ホームに戻る
                </a>
            </p>
        </div>
    </div>
</div>
{% endblock %}